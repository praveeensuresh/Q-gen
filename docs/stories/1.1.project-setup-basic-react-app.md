# Story 1.1: Project Setup and Basic React Application

## Status
Approved

## Story
**As a** developer,
**I want** a basic React application with routing and file upload interface,
**so that** we have a foundation to build the AI question generator upon.

## Acceptance Criteria
1. React application is created with modern tooling (Vite or Create React App)
2. Basic routing is implemented for main pages (Upload, Processing, Preview, Export)
3. File upload component accepts PDF files with drag-and-drop functionality
4. File validation ensures only PDF files are accepted
5. Basic error handling displays user-friendly messages for invalid files
6. Application is deployable to a development environment

## Tasks / Subtasks
- [ ] Set up React project with Vite (AC: 1)
  - [ ] Initialize Vite React TypeScript project
  - [ ] Configure Vite for optimal development experience
  - [ ] Set up project structure following monorepo pattern
- [ ] Install and configure Material UI components (AC: 1)
  - [ ] Install Material-UI v5.15+ with required dependencies
  - [ ] Configure MUI theme and provider
  - [ ] Set up MUI component imports and styling
- [ ] Implement React Router for navigation (AC: 2)
  - [ ] Install React Router DOM
  - [ ] Create route structure for main pages
  - [ ] Implement navigation components
- [ ] Create file upload component with drag-and-drop (AC: 3)
  - [ ] Implement drag-and-drop functionality using React Dropzone
  - [ ] Create PDF file validation logic
  - [ ] Add file size validation (10MB limit)
- [ ] Add PDF file validation (AC: 4)
  - [ ] Validate file type (PDF only)
  - [ ] Validate file size limits
  - [ ] Add file corruption detection
- [ ] Implement basic error handling (AC: 5)
  - [ ] Create error boundary components
  - [ ] Add user-friendly error messages
  - [ ] Implement error recovery mechanisms
- [ ] Set up development environment configuration (AC: 6)
  - [ ] Configure environment variables
  - [ ] Set up development scripts
  - [ ] Configure build and deployment settings

## Dev Notes

### Previous Story Insights
This is the first story in Epic 1, so no previous story context exists.

### Data Models
[Source: architecture.md#data-models]

**User Model:**
```typescript
interface User {
  id: string;
  email: string;
  role: 'teacher';
  created_at: Date;
  last_login: Date;
}
```

**Document Model:**
```typescript
interface Document {
  id: string;
  user_id: string;
  filename: string;
  file_path: string;
  file_size: number;
  upload_status: 'uploading' | 'processing' | 'completed' | 'failed';
  extracted_text: string;
  created_at: Date;
  processed_at: Date;
}
```

### API Specifications
[Source: architecture.md#api-specification]

**Key Endpoints for this story:**
- `POST /api/documents` - Upload PDF document
- `GET /api/health` - Health check endpoint

**Authentication:**
- JWT token-based authentication via Supabase Auth
- Row Level Security (RLS) policies for data isolation

### Component Specifications
[Source: architecture.md#components]

**File Upload Component:**
- Handle PDF file uploads with drag-and-drop, validation, and progress tracking
- Technology Stack: MUI Upload components, React Dropzone, TypeScript
- Must validate file type (PDF only) and size (10MB limit)

**React App Component:**
- Main application shell with routing, authentication state, and global error handling
- Technology Stack: React 18, TypeScript, MUI v5

### File Locations
[Source: architecture.md#unified-project-structure]

**Monorepo Structure:**
```
ai-question-generator/
├── apps/
│   └── web/                    # Frontend application (React)
├── packages/
│   ├── shared/                 # Shared types/utilities
│   ├── ui/                     # Shared UI components
│   └── config/                 # Shared configuration
```

**Frontend Component Organization:**
```
apps/web/src/
├── components/
│   ├── ui/                    # Reusable UI components
│   ├── features/              # Feature-specific components
│   │   └── upload/            # File upload components
│   └── layout/                # Layout components
├── pages/                     # React pages
│   ├── index.tsx             # Upload page
│   └── auth/
│       ├── login.tsx         # Teacher login
│       └── register.tsx      # Teacher registration
├── hooks/                     # Custom React hooks
├── services/                  # API client services
├── stores/                    # Zustand state management
├── types/                     # TypeScript type definitions
└── utils/                     # Utility functions
```

### Testing Requirements
[Source: architecture.md#testing-strategy]

**Testing Standards:**
- Test file location: `apps/web/src/__tests__/` for unit tests
- Testing frameworks: Vitest + Testing Library for unit and integration tests
- Unit test coverage: Minimum 80% code coverage for new functionality
- Test organization: Unit tests for components, hooks, and services

**Testing Requirements for this story:**
- Unit tests for file upload component
- Unit tests for routing functionality
- Unit tests for error handling components
- Integration tests for file validation logic

### Technical Constraints
[Source: architecture.md#tech-stack]

**Technology Stack:**
- Frontend Language: TypeScript 5.3+
- Frontend Framework: React 18.0+
- UI Component Library: Material-UI (MUI) 5.15+
- State Management: Zustand 4.4+
- Build Tool: Vite 5.0+
- Testing: Vitest + Testing Library

**Environment Variables:**
```bash
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
MAX_FILE_SIZE=10485760  # 10MB
ALLOWED_FILE_TYPES=application/pdf
```

**Security Requirements:**
- CSP Headers: `default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https://*.supabase.co https://api.openai.com`
- XSS Prevention: React's built-in XSS protection, input sanitization
- Secure Storage: JWT tokens in httpOnly cookies

**Performance Requirements:**
- Bundle Size Target: < 500KB initial bundle
- Loading Strategy: Code splitting by route, lazy loading for heavy components
- Response Time Target: < 200ms for API responses

### Error Scenarios
[Source: prd-epic1-stories.md#story-11]

**Error Handling Requirements:**
- Invalid File Type: Display clear error message "Please upload a PDF file only" with file type requirements
- File Too Large: Show error "File size exceeds 10MB limit" with size reduction suggestions
- Network Upload Failure: Display "Upload failed. Please check your connection and try again" with retry button
- Browser Compatibility: Show warning for unsupported browsers with recommended alternatives
- JavaScript Disabled: Display fallback message with instructions to enable JavaScript
- Route Navigation Errors: Show 404 page with navigation back to main upload page
- Component Loading Failures: Display error boundary with "Something went wrong" and reload option

## Testing

### Testing Standards
[Source: architecture.md#testing-strategy]

**Test File Location:**
- Unit tests: `apps/web/src/__tests__/`
- Integration tests: `apps/web/src/__tests__/integration/`
- E2E tests: `apps/web/e2e/`

**Testing Frameworks:**
- Unit/Integration: Vitest + Testing Library
- E2E: Playwright (for future stories)

**Test Coverage Requirements:**
- Minimum 80% code coverage for new functionality
- All components must have unit tests
- All error scenarios must be tested

**Testing Patterns:**
- Use React Testing Library for component testing
- Mock external dependencies (API calls, file operations)
- Test user interactions and error states
- Validate accessibility requirements

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| [Current Date] | 1.0 | Initial story creation | Scrum Master |

## Dev Agent Record

### Agent Model Used
_To be populated by development agent_

### Debug Log References
_To be populated by development agent_

### Completion Notes List
_To be populated by development agent_

### File List
_To be populated by development agent_

## QA Results
_To be populated by QA agent_
